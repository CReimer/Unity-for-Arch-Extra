Modify the guest session script so that it doesn't depend on the Debian/
Ubuntu specific adduser package.
diff -Nru lightdm-1.1.3.orig/debian/guest-account lightdm-1.1.3/debian/guest-account
--- lightdm-1.1.3.orig/debian/guest-account	2012-02-16 20:28:57.863351309 -0500
+++ lightdm-1.1.3/debian/guest-account	2012-02-16 21:27:00.476762818 -0500
@@ -36,7 +36,21 @@
     fi
   else
     # does not exist, so create it
-    adduser --system --no-create-home --home / --gecos "Guest" --group --shell /bin/bash $USER || {
+    # Arch Linux modification: Ubuntu/Debian uses their own adduser package,
+    # which works differently from the own provided by the shadow package.
+    # Instead, use useradd, which works in any distro.
+    #
+    # Only the syntax is changed
+    # adduser          -> useradd
+    # --system         -> --system
+    # --no-create-home -> --no-create-home
+    # --home           -> --home-dir
+    # --gecos          -> --comment
+    # --group          -> --user-group
+    # --shell          -> --shell
+    #
+    #adduser --system --no-create-home --home / --gecos "Guest" --group --shell /bin/bash $USER || {
+    useradd --system --no-create-home --home-dir / --comment "Guest" --user-group --shell /bin/bash $USER || {
         umount "$HOME"
         rm -rf "$HOME"
         exit 1
@@ -123,7 +137,15 @@
   # remove leftovers in /tmp
   find /tmp -mindepth 1 -maxdepth 1 -uid "$UID" | xargs rm -rf || true
 
-  deluser --system "$USER"
+  # deluser is provided by the adduser package on Debian/Ubuntu. useradd
+  # doesn't have a '--system' parameter, which causes deluser to only delete
+  # system users, so this will be handled using this script.
+  #deluser --system "$USER"
+  SYS_UID_MIN="$(cat /etc/login.defs | grep SYS_UID_MIN | awk '{print $2}')"
+  SYS_UID_MAX="$(cat /etc/login.defs | grep SYS_UID_MAX | awk '{print $2}')"
+  if [ "${UID}" -ge "${SYS_UID_MIN}" ] && [ "${UID}" -le "${SYS_UID_MAX}" ]; then
+    userdel "${USER}"
+  fi
 }
 
 case "$1" in
