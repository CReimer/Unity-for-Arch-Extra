# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

packages=()
setvar() { eval "_ver_${1/-/_}=${2}"; packages+=(${1}); }

setvar amazoncloudreader	2.2ubuntu1
setvar angrybirds		2.2
setvar bbcnews			2.3
setvar cuttherope		2.2
setvar facebookapps		2.2ubuntu1
setvar facebookmessenger	2.4.12
setvar gmail			2.4.7
setvar googlecalendar		2.2
setvar googledocs		2.2
setvar googleplus		2.4.12
setvar googleplusgames		2.3
setvar grooveshark		2.2
setvar hulu-player		2.4.12
setvar lastfm-radio		2.2
setvar launchpad		2.2
setvar librefm			2.4.12
setvar linkedin			2.4.8
setvar livemail			2.3
setvar mail-ru			2.2
setvar newsblur			2.2
setvar pandora-com		2.2ubuntu1
setvar qq-mail			2.2
setvar reddit			2.2
setvar tumblr			2.2
setvar twitter			2.4.11
setvar vkcom			2.2
setvar wordpress-com		2.2
setvar yahoomail		2.3
setvar yahoonews		2.3
setvar yandex-music		2.3
setvar yandexnews		2.2
setvar youtube			2.4.11

pkgname=unity-webapps
epoch=1
pkgver=1.0
pkgrel=1
pkgdesc="Unity WebApps"
arch=('any')
url="http://packages.ubuntu.com/search?keywords=webapps&searchon=names&suite=saucy&section=all"
license=('GPL' 'custom')
groups=('unity-extra')

depends=('webapps-applications' 'xdg-utils')

install=icon_cache.install

provides=()
conflicts=()
replaces=()
source=()
for i in ${packages[@]}; do
  eval "_name=${i}; _ver=\${_ver_${i/-/_}}"

  # Smooth upgrade from old packages
  provides+=("unity-webapps-${_name}=${_ver}")
  replaces+=("unity-webapps-${_name}")
  conflicts+=("unity-webapps-${_name}")

  source+=("https://launchpad.net/ubuntu/+archive/primary/+files/unity-webapps-${_name}_${_ver}.tar.gz")
done

package() {
  install -dm755 "${pkgdir}/usr/share/doc/unity-webapps/"

  for i in ${packages[@]}; do
    eval "_name=${i}; _ver=\${_ver_${i/-/_}}"

    cd "${srcdir}/unity-webapps-${_name}-${_ver}"

    cat debian/install | while read SOURCE DEST; do
      if [ -f "${SOURCE}" ]; then
        install -dm755 "${pkgdir}/${DEST}/"
        install -m644 "${SOURCE}" "${pkgdir}/${DEST}/"
      elif [ -d "${SOURCE}" ]; then
        pushd "${pkgdir}/${DEST}/"
        find . -type d -exec install -dm755 "${pkgdir}/${DEST}/$(basename ${SOURCE})"/{} \;
        find . -type f -exec install -m644 {} "${pkgdir}/${DEST}/$(basename ${SOURCE})"/{} \;
        popd
      else
        echo "${SOURCE} does not exist!"
        exit 1
      fi
    done

    # License
    install -dm755 "${pkgdir}/usr/share/licenses/unity-webapps/"
    install -m644 debian/copyright \
                  "${pkgdir}/usr/share/licenses/unity-webapps/${_name}"

    echo "${_name} ${_ver}" >> \
      "${pkgdir}/usr/share/doc/unity-webapps/VERSIONS"
  done
}

sha512sums=('25c6147c2b1aed0fe7750cea47ebc6657f0b1fc834bb1ae378c93147e66694002e0cfd65a2fb60c21dee2fbbbdebb04e8dc8a63a77e546554162e45b7d84c818'
            '1f0f805e152ff2855c16fa7596c3f05860d77b427ab3fed247ff0f1afd121adbb323d1982faa6eefb283f4be5edef5dd0ba344be3a39cd3cdcf6c16aa4ecd671'
            'fe4982c21bea0ec5cd141f33bf8ce3a7fc2ed70c0f64c1b7fb27c81980d7aad1a02dcbe7543080d28f6a0d54926e99474a2e3122efa59aa70221e98ae8a7a9b5'
            'd2376168b36af06252456bfcfb7bd00cf21e05aed2476f0c52b4911f3baf6964a6c9077840cde8c90385f00c63befceeba7e822d4456ce8bb30b189f66c56f49'
            '403bf636429133c1fe27ecddf727b55cb4b5a8034325cf372541de8996d70b8b4a217209c2b1e3784cfa28c442693ce30f07554315d3d84c61414f2fcbf71f61'
            'de1f10370c5aadc36e18c50ac75e2d2424a284127daaf91f15691704f7cf71f1f6b393fede0b1028db2f83865f6603ad517e6ca52b20019ddbd024f24bc8d5e2'
            '66ac8d9c8710e19640e52786b53d7cf7feab494f68a5a395e879a51332a54e0f8027833b7e72d2a884404f9529e925e70067ed1e06210230ee85212f5ec08592'
            '9db54f39bd85a5798dddc5e521bd0e42248d56e3621166768ddc448f89e4fd78cc6e54a6bc535feb33ad6f42e2d73f3c426616c76caf5dd122581a07757ebc81'
            '20681325d7795a7fd5072ec6e35ebbed5493fda4b4cbfc3f1a74824c2ace34897962f68c16cb9f230700e70397b0bbabef96dd90c865bcb1fa0869ee586484d0'
            'f60bf7d413e0229ded52403735810a209c715325b2dc88461cbf2c23a9f33575d6b743711d15c1a446c93733bbd6318e6ae036a3620d776e818d9a909088d484'
            '46a934de3670ed909f3000fdd366f51156b58962c641c1b96d950d33bc57a715b178540d0d39cc6b8b7cd48616ffa1f9fdcd9347c84007ae8eccc6201b07f2ff'
            'fe51aa8683b3b1d7e9f75a7ad856cccb812497fb1f64a234f7d8d7eaafe71a2cc897bc49c5e93acc977289167964e877e519c049db73bf37684a477387e6987d'
            'f69abd034541c790457ce735c207e47e59958067535457ab672239cecf6addd7ac317afa8700d62064c899d085ea6f75ef54d1eb8f607dc06e1c7a569106b8c8'
            'efe9bbae841442a72fbba036a02d31392cb26b899d600c2a211daf8de4975c04349d7f7d23f6c83347b9c764fd07f45e49271259603a4189296ce27848ceaca5'
            '880750566a1b3977eac02e8905de9e41506fd287cd75813ce77e7b4a22ccf9fc3313b564e10c7925352560972fe08f8d218efe09651b238fa37f00bb09a3011b'
            '8635fc3988c559560415b1d29da10a1ff8e87158bc82d6990e4226b2fceeb1d921280e0275f544490c8c39b432d5a3ca182d3bca2a5edeff9791c6410d3fa888'
            '18786ea28ae23077127fbac549ad876c38d7adf4e2759b712cf2729c2c9623ff2e725762b31a6e362d8f30c33cd6db2113c97246a2c3f8355cc0e347e6a32492'
            '6cf4e8d966d90f85f776e101d2765d007cc162b52aab1f94da5189f8f538d093e133f185129d5abdaa61ab0cdbdce9aa1e273cce06d161eb30f336136a014647'
            '00bcedb265377bf209ef00a7e673bdb694bcea44a0677bf81b61386c28d8da77314dbc7818259b0cfcae75944d7394e58a13b3c283b8a7a92f4eebc93db0f2bc'
            '57490f1153bc17ca6c9c046b0e18fdcaaf900c5079fcc14798276d8ae9794fd999f0fee8bd8a41179657ef91db86faf24b987eb3455afca685364897203ac994'
            'bd59cd2f1c2c21f7314cae2024b0eda9f27374a57c830ee998767417e63c317f09823bbdcadda792d22fed0a338565010d4aede395d8ecffabace6eac97c7201'
            '16475a7d43b3199f461250dc96c21dfdb25bb4a9108e2d9cef0aa57c4eace7627f713c7af51130d802d765df894e0b07b6532b380d1f1f38e92e8e5bbd0962db'
            'fa6a6f6dbd9013f7ddc7583db92ea93774115981a76d6a4f722b2258eeb5e21654285bfed58704d6a952f04aced75998b526b9a8cd87e905ed5b3c80158472e7'
            '41946c4d4a4a156e02e6c5240090d1d6767d89363b24082c94ec964a72bbf5aad93f6d7c6c2f44c17777fc5d3e985927e0217a2ad84f013e371023953b8ab492'
            '18bd93773d08e9949d16466e868408cfa3e6527053625e1e07604832dcc243c113cbe88009aa3825b71d45ec4028a1dd7a772b44595f87f62ed5b7aa8b03c4d4'
            'ac6d89c969d364f48db0585b8c82dc1da728e6dbf2599b5e84a23cd479d598572aa6bd66a94c4425c00f63d8033e5a8a516a04f2b15742ee0253d1ea6e9fe972'
            'fb2d12d281fd2001e79f4c9021a007b6bbb6bdf86613889305098daa1242ef088fed655843300e578e4a36322af5798d7df1b8d4d5008da66efed7f68de6e6b1'
            '5c26664358ba72d924d93524edb79f5dd4ab473bfde792833a40700b548df9ac2e24833290a030168c7372af50b19410e83421b2d2b208786a75eb6ac5ba44de'
            '4c2cef6357122c98d7f7d53d877c667e9807e251d1fb64324762fec95776891e1b0abc5ad34ab5399192f4a57159d184952f24f78bed43aec79578fc4bfccea5'
            '6760401a80d19400719530a8e113c850d4853d0e8a2ea7799fbb399830f9b5fbd2da8c56fd199c7fd5c07f75ecdf8b8a0bbb5b5a2fe00eb99b09628469b45861'
            '5833c151ee4c719595c96393154344a7cef692005cd376bb153459f958a5e5080f482278dfb852814f07a0de9fe9fd60b4636ba4560e68ff76ac78f556493648'
            'c2d47c7db4fd4ffd2bd36abab9de752637657c17ae1e4c4567ddd1f61933edc0209d91625092513040f3de734bb37dcb70c68631686d02e315c499146df1f614')
